<shadui:Window
    x:Class="freader.Views.MainWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:freader.Converters"
    xmlns:local="clr-namespace:freader.Assets"
    xmlns:shadui="clr-namespace:ShadUI;assembly=ShadUI"
    xmlns:views="clr-namespace:freader.Views"
    xmlns:vm="using:freader.ViewModels"
    Title="freader"
    Width="1200"
    Height="800"
    x:DataType="vm:MainWindowViewModel"
    SaveWindowState="True"
    TitleFontWeight="SemiBold"
    WindowStartupLocation="CenterScreen">

    <Grid ColumnDefinitions="Auto * Auto">

        <!--  ========== LEFT SIDEBAR ==========  -->
        <shadui:Sidebar
            Grid.Column="0"
            Width="220"
            MinWidth="60"
            Padding="8"
            BorderBrush="{DynamicResource BorderColor30}"
            BorderThickness="0,0,1,0"
            CurrentRoute="{Binding CurrentRoute}"
            Expanded="{Binding #Toggler.IsChecked}">

            <!--  Sidebar Header  -->
            <shadui:Sidebar.Header>
                <ToggleButton
                    Name="Toggler"
                    Width="20"
                    Height="20"
                    Margin="10"
                    HorizontalAlignment="Left"
                    CornerRadius="{DynamicResource LgCornerRadius}"
                    Theme="{DynamicResource SideTogglerTheme}">
                    <Viewbox>
                        <TextBlock
                            Classes="LucideIcon"
                            FontFamily="{StaticResource LucideIcon}"
                            FontSize="16"
                            Foreground="{DynamicResource ForegroundColor}"
                            Text="&#57646;" />
                    </Viewbox>
                </ToggleButton>
            </shadui:Sidebar.Header>

            <!--  Navigation Items  -->
            <StackPanel Spacing="4">
                <shadui:SidebarItem
                    Command="{Binding OpenHomeCommand}"
                    Content="Home"
                    Route="home"> 
                    <shadui:SidebarItem.Icon> 
                        <PathIcon
                            Width="16"
                            Height="16"
                            Data="{x:Static local:Icons.Home}"
                            Foreground="{DynamicResource ForegroundColor}" /> 
                    </shadui:SidebarItem.Icon> 
                </shadui:SidebarItem> 
                <shadui:SidebarItem
                    Command="{Binding OpenLibraryCommand}"
                    Content="Library"
                    Route="library"> 
                    <shadui:SidebarItem.Icon> 
                        <PathIcon
                            Width="16"
                            Height="16"
                            Data="{x:Static local:Icons.Library}"
                            Foreground="{DynamicResource ForegroundColor}" /> 
                    </shadui:SidebarItem.Icon> 
                </shadui:SidebarItem> 
                <shadui:SidebarItem
                    Command="{Binding OpenDiscoverCommand}"
                    Content="Discover"
                    Route="discover"> 
                    <shadui:SidebarItem.Icon> 
                        <PathIcon
                            Width="16"
                            Height="16"
                            Data="{x:Static local:Icons.Discover}"
                            Foreground="{DynamicResource ForegroundColor}" /> 
                    </shadui:SidebarItem.Icon> 
                </shadui:SidebarItem> 
                <shadui:SidebarItem
                    Command="{Binding OpenCollectionsCommand}"
                    Content="Collections"
                    Route="collections"> 
                    <shadui:SidebarItem.Icon> 
                        <PathIcon
                            Width="16"
                            Height="16"
                            Data="{x:Static local:Icons.Collections}"
                            Foreground="{DynamicResource ForegroundColor}" /> 
                    </shadui:SidebarItem.Icon> 
                </shadui:SidebarItem>
            </StackPanel>


            <!--  Sidebar Footer  -->
            <shadui:Sidebar.Footer>
                <shadui:SidebarItem
                    Command="{Binding OpenSettingsCommand}"
                    Content="Settings"
                    Route="settings">
                    <shadui:SidebarItem.Icon>
                        <PathIcon
                            Width="16"
                            Height="16"
                            Data="{x:Static local:Icons.Settings}" />
                    </shadui:SidebarItem.Icon>
                </shadui:SidebarItem>
            </shadui:Sidebar.Footer>
        </shadui:Sidebar>

        <!--  ========== MAIN CONTENT ==========  -->
        <Border Grid.Column="1" Padding="24">
            <TransitioningContentControl Content="{Binding SelectedPage}" />
        </Border>

        <!--  ========== RIGHT SIDEBAR ==========  -->
        <Border
            Grid.Column="2"
            Width="220"
            Background="{DynamicResource SidebarBackgroundColor}"
            BorderBrush="{DynamicResource BorderColor30}"
            BorderThickness="1,0,0,0">
            <ScrollViewer>
                <StackPanel Margin="16" Spacing="24">
                    <!--  Search  -->
                    <StackPanel Spacing="8">
                        <TextBlock FontWeight="SemiBold" Text="Quick Search" />
                        <TextBox
                            shadui:ControlAssist.Label="Search"
                            Classes="Clearable"
                            Watermark="Search books...">
                            <TextBox.InnerRightContent>
                                <PathIcon
                                    Width="16"
                                    Data="{x:Static shadui:Icons.Search}"
                                    Foreground="{DynamicResource ForegroundColor}"
                                    Opacity="0.75" />
                            </TextBox.InnerRightContent>
                        </TextBox>
                    </StackPanel>

                    <!--  Reading Progress  -->
                    <shadui:Card>
                        <StackPanel Spacing="8">
                            <TextBlock FontWeight="SemiBold" Text="Reading Progress" />
                            <TextBlock Opacity="0.7" Text="75% Complete" />
                            <ProgressBar
                                Height="8"
                                Background="{DynamicResource BorderColor}"
                                CornerRadius="{DynamicResource SmCornerRadius}"
                                Foreground="{DynamicResource PrimaryColor}"
                                Maximum="100"
                                Value="75" />
                        </StackPanel>
                    </shadui:Card>

                    <!--  Recent Activity  -->
                    <shadui:Card>
                        <StackPanel Spacing="12">
                            <Grid ColumnDefinitions="* Auto">
                                <TextBlock FontWeight="SemiBold" Text="Recent Activity" />
                                <Button
                                    Grid.Column="1"
                                    Padding=""
                                    Classes="Secondary"
                                    Content="View All â†’" />
                            </Grid>
                            <!--  Activity items here  -->
                        </StackPanel>
                    </shadui:Card>
                </StackPanel>
            </ScrollViewer>
        </Border>    
    </Grid>
</shadui:Window>
